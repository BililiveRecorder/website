<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="announcement.xsl" ?>
<ui:ThemeShadowChrome xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                      xmlns:ui="http://schemas.modernwpf.com/2019"
                      xmlns:m="clr-namespace:BililiveRecorder.WPF.Models;assembly=BililiveRecorder.WPF">
  <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" BorderBrush="{DynamicResource SystemControlBackgroundAccentBrush}" BorderThickness="1" CornerRadius="5">
    <Border.Resources>
      <Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
        <Setter Property="TextWrapping" Value="Wrap"/>
      </Style>
      <Style TargetType="ui:PathIcon" x:Key="PathIconDataExternalLink">
        <Setter Property="Data" Value="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"/>
      </Style>
    </Border.Resources>
    <ScrollViewer>
      <ui:SimpleStackPanel Margin="10" Spacing="5">
        <ui:SimpleStackPanel Spacing="5">
          <WrapPanel>
            <Button Margin="2" Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org">
              <TextBlock TextAlignment="Center" Text="网站 Website&#xa;rec.danmuji.org"/>
            </Button>
            <Button Margin="2" Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://afdian.net/@genteure">
              <TextBlock TextAlignment="Center" Text="赞助 Sponsor&#xa;afdian.net/@genteure"/>
            </Button>
            <Button Margin="2" Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/faq/">
              <TextBlock TextAlignment="Center" Text="常见问题 FAQ&#xa;rec.danmuji.org/docs/faq/"/>
            </Button>
          </WrapPanel>
          <GroupBox Header="2.6.2 更新内容（2023年2月13日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 修复用户脚本 runtime 的一个 bug"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2.6.1 更新内容（2023年2月3日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 修复用户脚本 runtime 的一个 bug"/>
              <TextBlock Text="- 其他小改动"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2.6.0 更新内容（2023年2月1日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 给用户脚本添加了新接口"/>
              <TextBlock Text="- 在特定情况下（如硬盘满了）停止自动重试"/>
              <TextBlock Text="- 其他改动"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2022年8月公告">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <TextBlock Text="从大约 7 月 20 日 左右开始，B站自建的直播服务器在直播结束后不会断开直播流，而是超大量重复发送最后几秒直播数据。"/>
              <TextBlock Text="从录播姬 2.2.0 开始，用标准模式录制时，会在检测到连续 10 次收到重复数据后主动断开录制。"/>
              <TextBlock Text="原始数据模式不会对直播服务器发送的数据做任何分析处理，需要手动结束录制。"/>
              <TextBlock Text="请重点关注一下主播下播后的录制状态。"/>
              <TextBlock Text=""/>
              <TextBlock Text=""/>
              <TextBlock Text="之后录播姬桌面版考虑只支持 Windows 10 系统，不再支持 Windows 7 8 8.1"/>
              <TextBlock Text="如果有什么反馈意见的话，可以加QQ群、Discord Server、或发邮件。"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2.5.0 更新内容（2022年10月2日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 修复了用户脚本里 fetchSync 不支持设置 Cookie header 的问题"/>
              <TextBlock Text="- 在房间列表页面添加了调查问卷链接"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2.4.0 更新内容（2022年9月3日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 调整了修复逻辑，解决了一部分时间戳跳变问题修不到的问题"/>
              <TextBlock Text="- 给直播封面下载添加了超时时间和失败重试"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2.3.0 更新内容（2022年8月27日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志（推荐）" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 新增了开播提醒功能，在 Windows 10、11 上能显示头像和直播间封面，默认关闭"/>
              <TextBlock Text="- 新增了录播同时保存直播间封面的功能"/>
              <TextBlock Text="- 新增了 WS/WSS 弹幕协议支持"/>
              <TextBlock Text="- 调整了数据处理系统"/>
              <TextBlock Text="- 其他小修改"/>
            </ui:SimpleStackPanel>
          </GroupBox>
          <GroupBox Header="2.2.0 更新内容（2022年8月2日）">
            <ui:SimpleStackPanel Margin="5" Spacing="5">
              <Button Command="{x:Static m:Commands.OpenLink}" CommandParameter="https://rec.danmuji.org/user/change-log/">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                  <TextBlock Text="在浏览器查看完整更新日志（推荐）" Margin="0,0,5,0"/>
                  <ui:PathIcon Style="{StaticResource PathIconDataExternalLink}"/>
                </StackPanel>
              </Button>
              <TextBlock Text="- 调整了直播数据修复系统"/>
              <TextBlock Text="- 新增了判定规则：连续收到10次重复的直播数据就主动断开录制"/>
              <TextBlock Text="- 现在每次开始录制之前都会更新一次直播间信息"/>
            </ui:SimpleStackPanel>
          </GroupBox>
        </ui:SimpleStackPanel>
      </ui:SimpleStackPanel>
    </ScrollViewer>
  </Border>
</ui:ThemeShadowChrome>
